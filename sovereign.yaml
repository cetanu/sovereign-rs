templates:
  - path: xds_templates/1.25/clusters.json.jinja2
    resource_type: clusters
    envoy_version: '1.25'

sources:
  items:
    - type: python
      config:
        code: |
          import os
          import requests

          URL = os.environ["OSB_URL"]

          def main():
              response = requests.get(URL)
              response.raise_for_status()
              return response.text

template_context:
  interval: 30
  items:
    name:
      deserialize_as: json
      data_source:
        http:
          url: https://httpbin.org/anything
          headers:
            foo: bar

node_matching:
  source_key: service_clusters
